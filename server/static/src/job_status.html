{% extends "index.html" %}

{% block main_info %}

  <div class="card">
    <div class="card-header"><strong>job {{ job.id }}</strong></div>
      <table class="table table-responsive-sm table-hover table-outline mb-0">
          <thead class="thead-light">
            <tr>
              <th class="text-center">id</th>
              <th class="text-center">name</th>
              <th class="text-center">Date</th>
              <th class="text-center">Steps</th>
            </tr>
          </thead>
          <tbody>
            <tr>
                  <tr>
                    <td>
                      {{ job.id }}
                    </td>
                    <td>
                      {{ job.name }}
                    </td>
                    <td>
                      <a> {{ job.date }} </a>
                    </td>
                    <td>
                      {% for message in w_msg %}
                        <a> {{ message.done }}/{{ message.total }} </a>
                      {% endfor %}
                      </td>
                  </tr>
          </tbody>
        </table>
  </div>

  <div class="card">
    <div class="card-header">progress</div>
    <div class="card-body">
      <div class="progress">
        {% for message in w_msg %}
          {% set progress_percent = "%.2f"|format((message.done|float)/(message.total|float)*100)|string %}
          <div class="progress-bar" role="progressbar" style="width: {{ progress_percent }}%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">{{ progress_percent }}%</div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">jobs</div>
    <div class="card-body">
      <div class="progress">
      <tr>
        {% for wf in jobs %}
      <tr>
        <td>
          <a href='/job_status/{{ wf.id }}'> {{ job.id }} </a>
        </td>
        <td>
          <a href='/job_status/{{ wf.id }}'> {{ job.name }} </a>
        </td>
        <td>
          <a> {{ job.status }} </a>
        </td>
        <td>
          <a> {{ job.date }} </a>
        </td>
        <td>
          <a> {{ job.jobs }} </a>
        </td>
      </tr>
      {% endfor %}
      </div>
    </div>
  </div>

 {% endblock %}
